<html>
<head>
  <title>Play</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,200|Bad+Script|Loved+by+the+King' rel='stylesheet' type='text/css'>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<style>
body {
    background-color: black;
    color: white;
}
#canvas {
    position: absolute;
    background-color: black;
}
</style>
<body>
<canvas id="canvas"></canvas>
</body>
<script>

    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    canvas.height = $(window).height();
    canvas.width = $(window).width();

    var color = 'red';
    var drops = [];

    function getRandomColor() {
        var letters = '0123456789ABCDEF'.split('');
        var color = '#F';
        for (var i = 0; i < 5; i++ ) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }

    function animateDrop(drop) {

        drop.r = drop.r - 0.005;
        drop.vy = drop.vy + 0.02;
        drop.y = drop.y + drop.vy;
        drop.x = drop.x + drop.vx;

        if (drop.x > canvas.width || drop.x < 0 || drop.y > canvas.height || drop.y < 0 || drop.r < 0.1) {
            drop.del = true;
        }
    }

    function draw() {
        canvas.width = canvas.width;  // clear

        var new_drops = [];

        /* create new array for drops that are still on screen */
        for (var i = 0; i < drops.length; i++) {
            var d = drops[i];
            if (!d.del) {
                new_drops.push(d);
            }
        }

        /* replace array */
        drops = new_drops;

        for (var j = 0; j < drops.length; j++) {
            var drop = drops[j];
            animateDrop(drop);
            ctx.fillStyle = drop.c;
            ctx.beginPath();
            ctx.arc(drop.x, drop.y, drop.r, 0, 2 * Math.PI, false);
            ctx.fill();
        }
    }

    function animation() {
        draw();
        setTimeout(animation, 1);
    }

    exec = false;
    function beginAnimation() {
        if (!exec) {
            exec = true;
            animation();
        }
    }

    function start(x, y) {
        var drop = {x: x, y: y, vy: Math.random() * 2 - 1.5, vx: Math.random() * 2 - 1, r: 1.5, c: color, iters: 0, del: false};
        drops.push(drop);
        beginAnimation();
    }

    canvas.addEventListener('click', function(e) {
        for (var i = 0; i < 100   ; i++) {
            color = getRandomColor();
            start(e);
        }
    });

    function fire() {
        var x = canvas.width * Math.random() * 0.6 + 0.2 * canvas.width;
        var y = canvas.height * Math.random() / 2.5 + canvas.height * 0.1;
        for (var i = 0; i < 50   ; i++) {
            color = getRandomColor();
            start(x, y);
        }
    }

    setInterval(fire, 700); // stagger
    setInterval(fire, 500);

</script>