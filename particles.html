<html>
<head>
  <title>Play</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,200|Bad+Script|Loved+by+the+King' rel='stylesheet' type='text/css'>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<style>
body {
    background-color: black;
    color: white;
}
#count {
}
#canvas {
    position: absolute;
    background-color: black;
}
</style>
<body>
<canvas id="canvas"></canvas>
<div class="row">
    <div class="col-sm-1">
        <h1 id="count"></h1>
    </div>
</div>
</body>
<script>

    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    canvas.height = $(window).height();
    canvas.width = $(window).width();

     var drops = [];

    function deleteDrop(drop) {
        drops.splice(drop.id, 1);
            for (var i = 0; i < drops.length; i++) {
                drops[i].id = i;
            }
    }

    function animateDrop(drop) {
//        drop.vy = drop.vy + 0.1;
        drop.y = drop.y + drop.vy;
        drop.x = drop.x + drop.vx;
        drop.iters = drop.iters + 1;

        if (drop.x > canvas.width) {
            drop.vx = -drop.vx;
//            deleteDrop(drop)
        }
        if (drop.x < 0) {
             drop.vx = -drop.vx;
//            deleteDrop(drop)
        }
        if (drop.y > canvas.height) {
             drop.vy = -drop.vy;
//            deleteDrop(drop)
        }
        if (drop.y < 0) {
             drop.vy = -drop.vy;
//            deleteDrop(drop)
        }

        if (drop.iters > 100) {
            drops.push({
                x: drop.x,
                y: drop.y,
                vy: 2 * Math.random() - 1,
                vx: 2 * Math.random() - 1,
                r: 2,
                c: 'white',
                iters: 0
            });
            drop.iters = 0;
        }

        if (drops.length > 8192) {
            drops.splice(1, 8192);
        }

        document.getElementById('count').innerHTML = drops.length;

    }

    function draw() {
        canvas.width = canvas.width;
        for (var i = 0; i < drops.length; i++) {
            var drop = drops[i];
            animateDrop(drop);
            ctx.fillStyle = drop.c;
            ctx.beginPath();
            ctx.arc(drop.x, drop.y, drop.r, 0, 2 * Math.PI, false);
            ctx.fill();
        }
    }

    function animation() {
        draw();
        setTimeout(animation, 0.001);
    }

    function beginAnimation() {
        if (!exec) {
            exec = true;
            animation();
        }
    }

    var exec = false;
    var drop = {
        id: 1,
        x: canvas.width / 2,
        y: canvas.height / 2,
        vy: 2 * Math.random() - 1,
        vx: 2 * Math.random() - 1,
        r: 3,
        c: 'white',
        iters: 0
    };
    drops.push(drop);
    beginAnimation();

</script>